(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b63fab2"],{"3d06":function(t,e,a){},"3fe3":function(t,e,a){"use strict";var i=a("688d");e["a"]={data:function(){var t=this;return{options2:{shortcuts:[{text:"近一周",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"近一个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"近一年",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-864e5*Object(i["b"])()),[e,t]}}],disabledDate:function(e){if(t.endMonth){var a=t.getDate(t.endMonth);return e&&e>a||e>new Date}return e&&e>new Date}}}}}},"538e":function(t,e,a){"use strict";a("3d06")},"688d":function(t,e,a){"use strict";function i(t){var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var i=t.getDate();return i=i<10?"0"+i:i,e+"-"+a+"-"+i}function n(){var t=new Date,e=new Date(t.getFullYear(),0,1),a=t.getTime()-e.getTime(),i=Math.floor(a/864e5);return i}a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}))},b508:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[t._m(0),a("div",{staticClass:"main-body"},[a("div",{staticClass:"eCharts-filter"},[a("Row",{staticClass:"filter-item",attrs:{type:"flex",justify:"space-around",gutter:"10"}},[a("i-col",{staticClass:"text-left",attrs:{span:7}},[a("Select",{attrs:{size:"large",placeholder:"请选择部门",filterable:"",clearable:""},on:{"on-change":t.changeDept},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.deptList,(function(e){return a("Option",{key:e.groupId+e.groupName,attrs:{value:e.groupId}},[t._v(t._s(e.groupName))])})),1)],1),a("i-col",{attrs:{span:7}},[a("Input",{attrs:{placeholder:"请输入提交数量阈值",size:"large",type:"number",clearable:""},on:{"on-blur":t.changeLimit,"on-clear":t.handleClear},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),a("i-col",{staticClass:"text-left",attrs:{span:10}},[a("div",{staticClass:"date-box"},[a("DatePicker",{attrs:{type:"daterange",options:t.options2,placement:"bottom-end",placeholder:"请选择日期",size:"large",value:t.selectTimeValue},on:{"on-change":t.changeTime}})],1)])],1)],1),a("div",[t.hasData?a("div",{ref:"lineChart",staticClass:"line-box",attrs:{id:"myChart"}}):a("div",{staticClass:"main-none"},[a("noListData",{attrs:{noDataTxt:t.noDataTxt}})],1)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header margin-bottom-20"},[a("h3",[t._v("部门代码量")])])}],s=a("688d"),r=a("3fe3"),o={name:"DeptChart",mixins:[r["a"]],data:function(){return{chart:null,options:{},deptList:[],groupId:"",series:[],startDate:"",endDate:"",hasData:!1,noDataTxt:"暂无数据",dataObj:{series:[],categories:[]},limit:"1000",selectTimeValue:[]}},watch:{dataObj:{deep:!0,immediate:!0,handler:function(t){var e=this;this.$nextTick((function(){e.initOptions(t.categories,t.series),e.updateChart(e.options)}))}}},created:function(){var t=new Date,e=new Date;e.setTime(e.getTime()-2592e6),this.startDate=Object(s["a"])(e,"yyyy-MM-dd"),this.endDate=Object(s["a"])(t,"yyyy-MM-dd"),this.selectTimeValue[0]=this.startDate,this.selectTimeValue[1]=this.endDate},mounted:function(){this.getList()},methods:{initOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.options={chart:{type:"column"},title:{text:""},xAxis:{categories:t},yAxis:{min:0,title:{text:"代码量/行"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:this.$hCharts.theme&&this.$hCharts.theme.textColor||"gray"}}},legend:{align:"right",x:-30,verticalAlign:"bottom",y:25,floating:!0,backgroundColor:this.$hCharts.theme&&this.$hCharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>总量: "+this.point.stackTotal}},exporting:{enabled:!0},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:this.$hCharts.theme&&this.$hCharts.theme.dataLabelsColor||"white",style:{textOutline:"1px 1px black"}}}},series:e,colors:["#B5F3D5","#eff1fe"]}},updateChart:function(t){this.$el=document.getElementById("myChart"),this.chart=new this.$hCharts.Chart(this.$el,t)},initChart:function(){this.$el=document.getElementById("myChart"),this.chart=new this.$hCharts.Chart(this.$el,this.options)},getList:function(){var t=this;this.$store.dispatch("deptManager/getDeptList").then((function(e){t.deptList=e.data,t.groupId=t.deptList[0].groupId||"",t.getData(t.deptList[0].groupId)})).catch((function(){}))},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.hasData=!1;var a={startDate:this.startDate,endDate:this.endDate,projectId:"",userId:"",groupId:""===e?this.deptList[0].groupId:e,limit:this.limit};this.$store.dispatch("eCharts/userbasecode",a).then((function(e){console.log(e.data.series[0].data.length),0===e.data.series[0].data.length?t.hasData=!1:(t.hasData=!0,t.$set(t.dataObj,"series",e.data.series),t.$set(t.dataObj,"categories",e.data.xchart))})).catch((function(){}))},changeLimit:function(){this.getData()},handleClear:function(){this.getData()},changeDept:function(t){this.getData(t)},changeTime:function(t){this.selectTime=t,this.startDate=t[0],this.endDate=t[1],this.getData(this.groupId)}}},h=o,l=(a("538e"),a("2877")),c=Object(l["a"])(h,i,n,!1,null,"dfe33a4a",null);e["default"]=c.exports}}]);