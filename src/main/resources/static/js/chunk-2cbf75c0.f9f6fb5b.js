(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cbf75c0"],{"113f":function(t,e,a){"use strict";a("58a8")},1905:function(t,e,a){},"44fe":function(t,e,a){"use strict";a("86fa")},"58a8":function(t,e,a){},"6fcc":function(t,e,a){"use strict";a("1905")},"86fa":function(t,e,a){},e288:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[t._m(0),a("div",{staticClass:"main-body"},[a("div",{staticClass:"main-title margin-bottom-20"},[a("Row",{attrs:{gutter:20}},[a("i-col",{staticClass:"text-left",attrs:{span:4}},[a("Select",{attrs:{size:"large",placeholder:"请选择项目名称",filterable:"",clearable:""},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}},t._l(t.projectList,(function(e){return a("Option",{key:e.projectId+e.projectName,attrs:{value:e.projectId}},[t._v(t._s(e.projectName))])})),1)],1),a("i-col",{attrs:{span:4}},[a("div",{staticClass:"date-box"},[a("DatePicker",{attrs:{type:"date",placeholder:"请选择起始时间",options:t.options2,size:"large"},on:{"on-change":t.changeTime}})],1)]),a("i-col",{attrs:{span:3}},[a("Button",{directives:[{name:"debounce",rawName:"v-debounce"}],attrs:{size:"large",type:"primary"},on:{click:t.searchList}},[a("span",{staticClass:"fa fa-search"})])],1)],1)],1),t.hasList?a("div",[a("div",{staticClass:"page-table margin-bottom-20"},[a("Table",{attrs:{columns:t.columns10,data:t.dataList,stripe:""},scopedSlots:t._u([{key:"realProjectNames",fn:function(e){return[a("span",[t._v(t._s(t.getProjectNames(e)))])]}},{key:"users",fn:function(e){return[e.row.users?a("div",t._l(e.row.users,(function(e,s){return a("Tag",{key:s,attrs:{color:"cyan"}},[t._v(" "+t._s(e.realUserName?e.realUserName:e.userName)+" ")])})),1):a("span",{staticClass:"no-tip"},[t._v("暂无")])]}},{key:"actions",fn:function(e){return[a("Button",{staticClass:"action-btn",attrs:{type:"dashed",icon:"ios-create"},on:{click:function(a){return t.addTakeProject(1,e)}}},[t._v("修改")])]}}],null,!1,1338332481)})],1),a("div",{staticClass:"page-footer text-center"},[a("Page",{attrs:{total:t.itemTotal,"page-size-opts":[10,20,40],current:t.pageIndex,"page-size":t.pageSize,"show-elevator":"","show-total":"","show-sizer":""},on:{"on-page-size-change":t.getPageSize,"on-change":t.getPageList}})],1)]):a("div",{staticClass:"main-none"},[a("noListData")],1)]),a("div",[a("projectPerson",{ref:"projectPerson"}),a("addTakeProject",{ref:"addTakeProject",on:{getList:t.getList}})],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header margin-bottom-20"},[a("h3",[t._v("项目列表")])])}],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editRoleModal page"},[a("Modal",{staticClass:"page-modal",attrs:{width:"20%",title:"项目成员",scrollable:!1,"footer-hide":!0,"class-name":"vertical-center-modal",styles:{top:"-30px"}},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[a("div",{staticClass:"modalContainer margin-bottom-100"},[a("div",{staticClass:"main"},t._l(t.row,(function(e,s){return a("div",{key:s,attrs:{size:"large"}},[a("Tag",{attrs:{color:"blue"}},[t._v(" "+t._s(e.realUserName?e.realUserName:e.userName)+" ")])],1)})),0)])])],1)},r=[],n={name:"addModal",data:function(){return{dialogVisible:!1,row:[]}},computed:{},watch:{dialogVisible:function(t){t?console.log(this.row):this.$emit("getList")},isEdit:function(t){this.disabled=!!t}},mounted:function(){},methods:{closeModal:function(){this.dialogVisible=!1}}},c=n,l=(a("6fcc"),a("2877")),d=Object(l["a"])(c,o,r,!1,null,"ce9ac5b4",null),u=d.exports,m=(a("2f62"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editRoleModal page"},[a("Modal",{staticClass:"page-modal",attrs:{width:"40%",title:t.title,scrollable:!1,"footer-hide":!0,"class-name":"vertical-center-modal",styles:{top:"-30px"}},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[t.loadingShow?a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[t._v("Loading")])],1):t._e(),a("div",{staticClass:"modalContainer margin-bottom-100"},[a("Form",{ref:"addForm",staticClass:"form-box",attrs:{"label-width":130,model:t.addForm,"label-colon":"",rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"Git项目名"}},[a("Select",{attrs:{size:"large",placeholder:"请选择项目名称",filterable:"",clearable:"",disabled:t.isEdit},model:{value:t.addForm.projectId,callback:function(e){t.$set(t.addForm,"projectId",e)},expression:"addForm.projectId"}},t._l(t.projectList,(function(e){return a("Option",{key:e.projectId+e.projectName,attrs:{value:e.projectId}},[t._v(t._s(e.projectName))])})),1)],1),a("FormItem",{attrs:{label:"项目名",prop:"realProjectNames"}},[a("Select",{attrs:{size:"large",placeholder:"请选择",filterable:"",clearable:"",multiple:""},model:{value:t.addForm.realProjectNames,callback:function(e){t.$set(t.addForm,"realProjectNames",e)},expression:"addForm.realProjectNames"}},t._l(t.projectName,(function(e){return a("Option",{attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),a("div",{staticClass:"detailBackBtn margin-bottom-40"},[a("Button",{attrs:{size:"large"},on:{click:function(e){return t.closeModal()}}},[t._v(t._s(t.$t("common.cancel")))]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.handleSubmit()}}},[t._v(t._s(t.$t("common.ensure")))])],1)],1)],1)}),p=[],h={name:"addModal",data:function(){return{loadingShow:!1,dialogVisible:!1,addForm:{projectId:"",realProjectNames:[]},ruleValidate:{gitProject:[{required:!0,message:"请输入Git项目名",trigger:"blur"}]},userLists:[],isEdit:!1,row:{},disabled:!1,title:"新增",projectName:[],projectList:[]}},watch:{dialogVisible:function(t){t?(this.addForm=this.row,console.log("this.addForm",this.addForm),this.getBugSystemName(),this.getProjectNameList()):(this.handleReset(),this.$emit("getList"))},isEdit:function(t){this.disabled=!!t}},methods:{handleReset:function(){this.$refs.addForm.resetFields(),this.addForm=this.$options.data.call(this).addForm},closeModal:function(){this.dialogVisible=!1,this.handleReset(),clearInterval(this.timer)},handleSubmit:function(){var t=this;this.$refs.addForm.validate((function(e){e&&t.updateProject()}))},updateProject:function(){var t=this,e={realProjectNames:this.addForm.realProjectNames,projectIds:[this.addForm.projectId]};this.$store.dispatch("projectManager/relationRealProject",e).then((function(e){404!==Number(e.code)?(t.$message({type:"success",message:"操作成功"}),t.$emit("getList"),t.dialogVisible=!1):t.$message({type:"error",message:e.message+"，请重新输入"})})).catch((function(){}))},getBugSystemName:function(){var t=this;this.$store.dispatch("bugDetails/getBugSystemName").then((function(e){var a=e.data;a.projectName.forEach((function(e){t.projectName.push({value:e,label:e})}))})).catch((function(){}))},getProjectNameList:function(){var t=this,e={type:1};this.$store.dispatch("commit/getProjectNameList",e).then((function(e){t.projectList=e.data})).catch((function(){}))}}},g=h,f=(a("44fe"),Object(l["a"])(g,m,p,!1,null,"f6a9f284",null)),j=f.exports,b={components:{projectPerson:u,addTakeProject:j},data:function(){var t=this;return{columns10:[{title:"项目ID",key:"projectId",align:"center"},{title:"项目名称",key:"projectName",align:"center"},{title:"对应项目",key:"realProjectNames",slot:"realProjectNames",align:"center"},{title:"创建时间",key:"createStr",align:"center",sortable:!0},{title:"项目成员",slot:"users",align:"center"},{title:"操作",slot:"actions",align:"center"}],dataList:[],hasList:!1,pageSize:10,pageIndex:1,itemTotal:0,options2:{disabledDate:function(e){if(t.endMonth){var a=t.getDate(t.endMonth);return e&&e>a||e>new Date}return e&&e>new Date}},projectList:[],projectId:"",startDate:"",endDate:""}},computed:{getProjectNames:function(){return function(t){var e="";return t.row.realProjectNames?(t.row.realProjectNames.forEach((function(t,a){e+=t+","})),e.substring(0,e.length-1)):""}}},mounted:function(){this.getList(),this.getProjectNameList()},methods:{getPageList:function(t){this.pageIndex=t,this.getList()},getPageSize:function(t){this.pageIndex=1,this.pageSize=pageSize,this.getList()},searchList:function(){this.index=1,this.getList()},getList:function(){var t=this,e={pageIndex:this.pageIndex,pageSize:this.pageSize,projectId:this.projectId,startDate:this.startDate};this.$store.dispatch("projectList/getList",e).then((function(e){var a=e.data;a.records&&0==a.records.length?t.hasList=!1:(t.hasList=!0,t.dataList=a.records,t.itemTotal=a.total)})).catch((function(){}))},detail:function(t){this.$refs.projectPerson.dialogVisible=!0,this.$refs.projectPerson.row=t.row.users},getProjectNameList:function(){var t=this,e={userId:this.userId,storageId:this.storageId,type:1};this.$store.dispatch("commit/getProjectNameList",e).then((function(e){t.projectList=e.data})).catch((function(){}))},changeTime:function(t){this.startDate=t},addTakeProject:function(t,e){if(console.log("row",e),this.$refs.addTakeProject.dialogVisible=!0,1===t){var a={realProjectNames:e.row.realProjectNames,projectId:e.row.projectId};this.$refs.addTakeProject.title="修改",this.$refs.addTakeProject.row=a,this.$refs.addTakeProject.isEdit=!0}else this.$refs.addTakeProject.title="新增",this.$refs.addTakeProject.isEdit=!1,this.$refs.addTakeProject.row={}}}},v=b,P=(a("113f"),Object(l["a"])(v,s,i,!1,null,"bddf9a88",null));e["default"]=P.exports}}]);