(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f0f7c97"],{"1b02":function(t,e,n){},"3fe3":function(t,e,n){"use strict";var r=n("688d");e["a"]={data:function(){var t=this;return{options2:{shortcuts:[{text:"近一周",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"近一个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"近一年",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-864e5*Object(r["b"])()),[e,t]}}],disabledDate:function(e){if(t.endMonth){var n=t.getDate(t.endMonth);return e&&e>n||e>new Date}return e&&e>new Date}}}}}},"688d":function(t,e,n){"use strict";function r(t){var e=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var r=t.getDate();return r=r<10?"0"+r:r,e+"-"+n+"-"+r}function a(){var t=new Date,e=new Date(t.getFullYear(),0,1),n=t.getTime()-e.getTime(),r=Math.floor(n/864e5);return r}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}))},6902:function(t,e,n){"use strict";n("1b02")},"9f77":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[t._m(0),n("div",{staticClass:"main-body"},[n("div",{staticClass:"main-title margin-bottom-20"},[n("Row",{attrs:{gutter:20}},[n("i-col",{attrs:{span:4}},[n("Input",{attrs:{placeholder:"请输入提交数量阈值",size:"large",type:"number",clearable:""},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),n("i-col",{staticClass:"text-left",attrs:{span:4}},[n("Select",{attrs:{size:"large",placeholder:"请选择部门",filterable:"",clearable:""},model:{value:t.query.groupId,callback:function(e){t.$set(t.query,"groupId",e)},expression:"query.groupId"}},t._l(t.deptList,(function(e){return n("Option",{key:e.groupId+e.groupName,attrs:{value:e.groupId}},[t._v(t._s(e.groupName))])})),1)],1),n("i-col",{staticClass:"text-left",attrs:{span:4}},[n("Select",{attrs:{size:"large",placeholder:"请选择BUG状态",filterable:"",clearable:""},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},t._l(t.statusList,(function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])})),1)],1),n("i-col",{attrs:{span:5}},[n("div",{staticClass:"date-box"},[n("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",options:t.options2,placement:"bottom-end",placeholder:"请选择日期",size:"large",value:t.selectTimeValue},on:{"on-change":t.changeTime}})],1)]),n("i-col",{attrs:{span:3}},[n("Button",{directives:[{name:"debounce",rawName:"v-debounce"}],attrs:{size:"large",type:"primary"},on:{click:t.searchList}},[n("span",{staticClass:"fa fa-search"})])],1)],1)],1),t.hasList?n("div",[n("div",{staticClass:"page-table margin-bottom-20 min-height-table"},[n("Table",{attrs:{loading:t.tableLoading,columns:t.newPersonColumns,stripe:"",data:t.dataList},scopedSlots:t._u([{key:"bugNumber",fn:function(e){var r=e.row;return[n("Tooltip",{attrs:{content:t.getTooltipContent(r)}},[n("div",{staticClass:"link-text",on:{click:function(e){return t.gotoBugDetail(r,0)}}},[t._v(t._s(r.bugNumber)),n("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"10px"},attrs:{color:"#ccc"}})])])]}},{key:"reopenRate",fn:function(e){var r=e.row;return[n("span",{staticClass:"link-text",class:t.isGreaterThan5Percent(r)?"hight-rate":"",on:{click:function(e){return t.gotoBugDetail(r,1)}}},[t._v(" "+t._s(t.getReopenRate(r)))])]}},{key:"CMMINumber",fn:function(e){var r=e.row;return[n("span",[t._v(" "+t._s(t.getCIMM(r)))])]}},{key:"level",fn:function(e){var r=e.row;return[n("span",{class:t.getLevel(r)<4?"hight-rate":""},[t._v(" "+t._s(t.getLevel(r))+t._s("-"!==t.getLevel(r)?"级":""))])]}},{key:"deletions",fn:function(e){var r=e.row;return[n("div",{staticClass:"actionLink"},[n("span",{staticClass:"delete-txt"},[t._v(t._s(r.deletions||0))])])]}},{key:"additions",fn:function(e){var r=e.row;return[n("div",{staticClass:"actionLink"},[n("span",{staticClass:"add-txt"},[t._v(t._s(r.additions||0))])])]}}],null,!1,3056785289)})],1),n("div",{staticClass:"page-footer text-center"},[n("Page",{attrs:{total:t.itemTotal,current:t.pageIndex,"page-size":t.pageSize,"show-elevator":"","show-total":"","show-sizer":""},on:{"on-page-size-change":t.getPageSize,"on-change":t.getPageList}})],1)]):n("div",{staticClass:"main-none"},[n("noListData")],1)]),n("div",{staticClass:"content_win"})])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-header margin-bottom-20"},[n("h3",[t._v("部门代码质量")])])}],i=n("3fe3"),s=n("688d"),o=n("2f62");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e=g(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){var e=p(t,"string");return"symbol"==u(e)?e:e+""}function p(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var f={name:"message",components:{},mixins:[i["a"]],data:function(){return{selectActive:1,hasList:!1,pageSize:10,pageIndex:1,itemTotal:0,sortMode:1,sortField:1,validForm:{},query:{groupId:"",status:"",startDate:"",endDate:""},deptList:[],dataList:[],personList:[],selectTime:[],tableLoading:!1,limit:"1000",selectTimeValue:[]}},computed:l(l(l({},Object(o["c"])("bugDetails",["tableColumns","statusList"])),Object(o["c"])("codeQuality",["columns","deptColumns","noSortColumns"])),{},{newPersonColumns:function(){return this.deptColumns.concat(this.noSortColumns).concat(this.columns)},getCIMM:function(){return function(t){return 0==t.bugNumber||0==t.codeTotal?0:(Number(t.bugNumber)/Number(t.codeTotal)*1e3).toFixed(2)}},getLevel:function(){var t=this;return function(e){var n=t.getCIMM(e);switch(!0){case n>5.52:return 1;case n>2.39&&n<=5.52:return 2;case n>.92&&n<=2.39:return 3;case n>.32&&n<=.92:return 4;case n>=0&&n<=.32:return 5;default:return"-"}}},getReopenRate:function(){return function(t){if(0==t.reopenNumber||0==t.bugNumber)return 0;var e=Number(t.reopenNumber)/Number(t.bugNumber);return(100*e).toFixed(2)}},isGreaterThan5Percent:function(){var t=this;return function(e){var n=t.getReopenRate(e),r=parseFloat(n)/100;return r>.05}}}),watch:{},created:function(){var t=new Date,e=new Date;e.setTime(e.getTime()-864e5*Object(s["b"])()),this.query.startDate=Object(s["a"])(e,"yyyy-MM-dd"),this.query.endDate=Object(s["a"])(t,"yyyy-MM-dd"),this.selectTimeValue[0]=this.query.startDate,this.selectTimeValue[1]=this.query.endDate},mounted:function(){void 0!==this.$route.params.projectId&&this.$set(this.validForm,"projectId",this.$route.params.projectId),this.getList(),this.getDeptList()},methods:{getPageList:function(t){this.pageIndex=t,this.getList()},getPageSize:function(t){this.pageIndex=1,this.pageSize=t,this.getList()},searchList:function(){this.pageIndex=1,this.getList()},updatePerson:function(){this.$refs.editPerson.dialogVisible=!0},getList:function(){var t=this;this.tableLoading=!0;var e={pageIndex:this.pageIndex,pageSize:this.pageSize,queryType:1,limit:this.limit,sortMode:this.sortMode,sortField:this.sortField};e=Object.assign(this.query,e),this.$store.dispatch("codeQuality/statistics",e).then((function(e){t.tableLoading=!1;var n=e.data;n.records&&0===n.records.length?t.hasList=!1:(t.hasList=!0,t.dataList=n.records,t.itemTotal=n.total)})).catch((function(){t.tableLoading=!1}))},getDeptList:function(){var t=this;this.$store.dispatch("deptManager/getDeptList").then((function(e){t.deptList=e.data})).catch((function(){}))},changeTime:function(t){console.log(t),this.selectTime=t,this.query.startDate=t[0],this.query.endDate=t[1]},getTooltipContent:function(t){return"\n        未修复数(个)：".concat(t.doingNumber,"\n        已修复数(个)：").concat(t.fixNumber,"\n        Reopen数(个)：").concat(t.reopenNumber,"\n      ")},sortBugNumber:function(t){var e=t.column,n=t.order;this.sortMode="desc"===n?2:1,this.sortField="bugNumber"===e.slot?1:2,this.getList()},gotoBugDetail:function(t,e){this.$router.push({path:"/bugModule/bugDetails",query:{groupId:t.groupId,startDate:this.query.startDate,endDate:this.query.endDate,type:e}})}}},m=f,h=(n("6902"),n("2877")),b=Object(h["a"])(m,r,a,!1,null,"499f0af3",null);e["default"]=b.exports}}]);